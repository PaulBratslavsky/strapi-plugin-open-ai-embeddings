"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),l=require("react"),x=require("@internationalized/number"),g=require("@strapi/icons"),M=require("styled-components"),B=require("../DesignSystemProvider.cjs"),h=require("../helpers/keyboardKeys.cjs"),E=require("../hooks/useControllableState.cjs"),U=require("../hooks/useId.cjs"),H=require("../Field/FieldInput.cjs"),O=require("../Field/Field.cjs"),T=require("../Flex/Flex.cjs"),z=require("../Field/FieldLabel.cjs"),y=require("../Icon/Icon.cjs"),W=require("../Field/FieldHint.cjs"),X=require("../Field/FieldError.cjs"),I=r=>r&&r.__esModule?r:{default:r},Y=I(l),G=I(M),N=G.default.button`
  display: flex;
  height: 1rem;
  align-items: ${({reverse:r})=>r?"flex-end":"flex-start"};
  transform: translateY(${({reverse:r})=>r?"-2px":"2px"});
  cursor: ${({disabled:r})=>r?"not-allowed":void 0};
  svg {
    display: block;
    height: ${4/16}rem;
    transform: ${({reverse:r})=>r?"rotateX(180deg)":void 0};
  }
`,J="",Q=Y.default.forwardRef(({size:r="M",startAction:q,name:F,hint:w,error:j,label:d,labelAction:D,locale:C,id:V,onValueChange:S,value:m,step:o=1,required:A=!1,disabled:u=!1,...R},_)=>{const k=U.useId(V),K=B.useDesignSystem("NumberInput"),f=C||K.locale,i=l.useRef(new x.NumberParser(f,{style:"decimal"})),c=l.useRef(new x.NumberFormatter(f,{maximumFractionDigits:20})),[s,P]=E.useControllableState({prop(e){const n=String(m);return isNaN(Number(n))||n!==e&&e!==""?e:c.current.format(Number(m))},defaultProp:J,onChange(e){const n=i.current.parse(e??"");S(isNaN(n)?void 0:n)}}),a=e=>{P(String(e))},v=({target:{value:e}})=>{i.current.isValidPartialNumber(e)&&a(e)},b=()=>{if(!s){a(o);return}const e=i.current.parse(s),n=isNaN(e)?o:e+o;a(c.current.format(n))},p=()=>{if(!s){a(-o);return}const e=i.current.parse(s),n=isNaN(e)?-o:e-o;a(c.current.format(n))},$=e=>{if(!u)switch(e.key){case h.KeyboardKeys.DOWN:{e.preventDefault(),p();break}case h.KeyboardKeys.UP:{e.preventDefault(),b();break}}},L=()=>{if(s){const e=i.current.parse(s),n=isNaN(e)?"":c.current.format(e);a(n)}};return t.jsx(O.Field,{name:F,hint:w,error:j,id:k,required:A,children:t.jsxs(T.Flex,{direction:"column",alignItems:"stretch",gap:1,children:[d&&t.jsx(z.FieldLabel,{action:D,children:d}),t.jsx(H.FieldInput,{ref:_,startAction:q,disabled:u,type:"text",inputMode:"decimal",onChange:v,onKeyDown:$,onBlur:L,value:s,size:r,endAction:t.jsxs(t.Fragment,{children:[t.jsx(N,{disabled:u,"aria-hidden":!0,reverse:!0,onClick:b,tabIndex:-1,type:"button","data-testid":"ArrowUp",children:t.jsx(y.Icon,{as:g.CarretDown,color:"neutral500"})}),t.jsx(N,{disabled:u,"aria-hidden":!0,onClick:p,tabIndex:-1,type:"button","data-testid":"ArrowDown",children:t.jsx(y.Icon,{as:g.CarretDown,color:"neutral500"})})]}),...R}),t.jsx(W.FieldHint,{}),t.jsx(X.FieldError,{})]})})});exports.NumberInput=Q;
